@using Microsoft.AspNetCore.Components.QuickGrid
@using WebWasm.Models
@page "/orders"

<PageTitle>Orders 📦</PageTitle>
<HeadContent>
	<meta name="description" content="Manage and track all orders in the system.📦" />
</HeadContent>

<div class="page-header">
	<h1>📦 Orders</h1>
	<p class="page-subtitle">Manage and track all orders</p>
</div>

<div class="stats-grid">
	<div class="stat-card">
		<span class="stat-icon">📊</span>
		<div class="stat-content">
			<span class="stat-value">@_totalOrders</span>
			<span class="stat-label">Total Orders</span>
		</div>
	</div>
	<div class="stat-card">
		<span class="stat-icon">⏳</span>
		<div class="stat-content">
			<span class="stat-value">@_pendingOrders</span>
			<span class="stat-label">Pending</span>
		</div>
	</div>
	<div class="stat-card">
		<span class="stat-icon">✅</span>
		<div class="stat-content">
			<span class="stat-value">@_completedOrders</span>
			<span class="stat-label">Completed</span>
		</div>
	</div>
</div>

<div class="content-card">
	<div class="card-header">
		<h3>Orders</h3>
	</div>


	<div class="data-grid-container">
		<div class="data-grid-search">
			<input type="text"
				   placeholder="Search producers, loading places, materials..."
				   @bind="_searchText"
				   @bind:event="oninput"
				   class="search-input" />
		</div>

		@if (_hasItems)
		{
			<div class="data-grid-scroll">
				<QuickGrid Items="@FilteredOrders" Pagination="@_pagination" class="data-grid">
					<TemplateColumn Title="Name" Sortable="true" SortBy="@(GridSort<Order>.ByAscending(x => x.Name))">
						<div class="clickable-cell" @onclick="@(() => NavigateToOrder(context.Id))">
							@context.Name
						</div>
					</TemplateColumn>
					<PropertyColumn Property="@(v => v.Cost)" Title="Cost BYN" Sortable="true" />
					<TemplateColumn Title="Status" Sortable="false">
						<span class="badge @GetStatus(context.Status)">@context.Status</span>
					</TemplateColumn>
					<PropertyColumn Property="@(v => v.Created)" Title="Created" Sortable="true" />
					<TemplateColumn Title="Address" Sortable="false">
						<div class="address">@context.Address</div>
					</TemplateColumn>
					<PropertyColumn Property="@(v => v.TotalWeight)" Title="Weight" Sortable="true" />
					<PropertyColumn Property="@(v => v.PreferredDeliveryTime)" Title="Delivered At" Sortable="true" />
				</QuickGrid>
			</div>

			<div class="data-grid-pagination">
				<CustomPaginator State="@_pagination" />
			</div>
		}
		else
		{
			<div class="empty-state">
				<p>No orders available</p>
			</div>
		}
	</div>
</div>