@using Microsoft.AspNetCore.Components.QuickGrid
@using WebWasm.Models

<div class="data-grid-container">
	<div class="data-grid-search">
		<input type="text"
			   placeholder="Search regions..."
			   @bind="_searchText"
			   @bind:event="oninput"
			   class="search-input" />
	</div>

	@if (_hasItems)
	{
		<div class="data-grid-scroll">
			<QuickGrid Items="@FilteredRegions.AsQueryable()" Pagination="@_pagination" class="data-grid">
				<PropertyColumn Property="@(r => r.Name)" Title="Name" Sortable="true" />
				<TemplateColumn Title="Level Types" Sortable="false">
					<div class="level-types-cell">
						@foreach (var type in GetRegionTypes(context))
						{
							<span class="level-badge level-badge-@type.ToLower()">@type</span>
						}
					</div>
				</TemplateColumn>
			<TemplateColumn Title="Actions" Sortable="false">
					<div class="region-actions">
						<button class="btn-action btn-view" @onclick="() => OnView.InvokeAsync(context)" title="View details">👁️ View</button>
						<button class="btn-action btn-edit" @onclick="() => OnEdit.InvokeAsync(context)" title="Edit region">✏️ Edit</button>
						<button class="btn-action btn-delete" @onclick="() => OnDelete.InvokeAsync(context)" title="Delete region">🗑️ Delete</button>
					</div>
				</TemplateColumn>
			</QuickGrid>
		</div>

		@if (_pagination.TotalItemCount.HasValue && _pagination.TotalItemCount.Value > _pagination.ItemsPerPage)
		{
			<div class="data-grid-pagination">
				<CustomPaginator State="@_pagination" />
			</div>
		}
	}
	else
	{
		<div class="empty-state">
			<p>No regions configured yet</p>
		</div>
	}
</div>
