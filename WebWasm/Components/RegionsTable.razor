@using WebWasm.Models

<div class="data-grid-container">
	<div class="data-grid-search">
		<input type="text"
			   placeholder="Search regions..."
			   @bind="_searchText"
			   @bind:event="oninput"
			   class="search-input" />
	</div>

	@if (_hasItems)
	{
		<div class="data-grid-scroll">
			<table class="regions-table">
				<thead>
					<tr>
						<th>Name</th>
						<th>Levels</th>
						<th>Level Types</th>
						<th>Actions</th>
					</tr>
				</thead>
				<tbody>
					@{
						var itemsToShow = FilteredRegions
							.Skip(_pagination.CurrentPageIndex * _pagination.ItemsPerPage)
							.Take(_pagination.ItemsPerPage)
							.ToList();
					}
					@foreach (var region in itemsToShow)
					{
						<tr>
							<td class="region-name">@region.Name</td>
							<td class="region-levels">@region.Levels?.Count ?? 0</td>
							<td class="region-types">
								@foreach (var type in GetRegionTypes(region))
								{
									<span class="level-badge level-badge-@type.ToLower()">@type</span>
								}
							</td>
							<td class="region-actions">
								<button class="btn-action btn-view" @onclick="() => OnView.InvokeAsync(region)" title="View details">???</button>
								<button class="btn-action btn-edit" @onclick="() => OnEdit.InvokeAsync(region)" title="Edit region">??</button>
								<button class="btn-action btn-delete" @onclick="() => OnDelete.InvokeAsync(region)" title="Delete region">???</button>
							</td>
						</tr>
					}
				</tbody>
			</table>
		</div>

		@if (_pagination.TotalItemCount.HasValue && _pagination.TotalItemCount.Value > _pagination.ItemsPerPage)
		{
			<div class="data-grid-pagination">
				<CustomPaginator State="@_pagination" />
			</div>
		}
	}
	else
	{
		<div class="empty-state">
			<p>No regions configured yet</p>
		</div>
	}
</div>
